<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Marketo</title>
  <link href="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.css" rel="stylesheet" type="text/css" media="all">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<!--   <link href="./style.css" rel="stylesheet" type="text/css" media="all">
 -->  <script src="https://www.contentstack.com/sdks/contentstack-ui-extensions/dist/latest/ui-extension-sdk.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.x-git.min.js"></script>
</head>

<body>
    <select class="form-control" id="form-select-field" style="display: none;">
          <option value>-- Select a form --</option>
    </select>
  <script>
"use strict";var _createClass=function(){function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var extensionField=void 0,selectField=void 0,marketo={};function domChangeListner(t){selectField.on("change",function(){var n=$("#form-select-field").val(),e=t.find(function(e){return e.id.toString()===n});extensionField.field.setData(e)})}function render(e){var n=extensionField&&extensionField.field&&extensionField.field.getData()?extensionField.field.getData():{},t=$("select option:contains('-- Select a form --')"),i=n.id;e.forEach(function(e){var n=$("<option></option>").attr("value",e.id).text(e.name);e.id===i&&n.attr("selected","selected"),selectField.append(n)}),t.attr("disabled","disabled"),i||t.attr("selected","selected"),selectField.show(),domChangeListner(e)}var Marketo=function(){function t(e){var n=e.url,e=e.folder;_classCallCheck(this,t),this.url=n,this.folder=e}return _createClass(t,[{key:"getForms",value:function(){var i=this;return new Promise(function(t,n){var e=""+i.url;return i.folder&&(e=e+"?folder="+i.folder),fetch(e,{method:"GET"}).then(function(e){return e.json()}).then(function(e){var n=(n=[{id:400,name:"None"}]).concat(e);return t(n)}).catch(function(e){n(e)})})}}]),t}();$(document).ready(function(){selectField=$("#form-select-field"),ContentstackUIExtension.init().then(function(e){(marketo=new Marketo((extensionField=e).config)).getForms().then(function(e){render(e)}),extensionField.window.enableAutoResizing()})});
</script>
</body>

</html>